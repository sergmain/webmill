package com.jsmithy.price;

import java.io.File;

import javax.servlet.http.HttpServletRequest;

import com.jsmithy.db.DBconnect;
import com.jsmithy.port.PortalInfo;
import com.jsmithy.main.UploadFile;
import com.jsmithy.main.UploadFileException;

public class UploadPriceList
{

   public static void process(HttpServletRequest request, String s, PortalInfo p)
	throws Exception
   {
	String storage_ = s;

	File temp_dir_ = new File(storage_);
	temp_dir_.mkdirs();
	File file_ = File.createTempFile("price", ".tmp", temp_dir_);

	UploadFile.save( request, 1024*256, file_ );
	PortalInfo p =  PortalInfo.getInstance(
		DBconnect.getInstance(false), request.getServerName() );

	ImportPriceList.process(file_, p );
    }
}