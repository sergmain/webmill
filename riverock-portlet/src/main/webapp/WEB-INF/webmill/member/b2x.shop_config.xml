<?xml version="1.0" encoding="windows-1251"?>
<!--
  ~ org.riverock.portlet - Portlet Library
  ~
  ~ Copyright (C) 2006, Riverock Software, All Rights Reserved.
  ~
  ~ Riverock - The Open-source Java Development Community
  ~ http://www.riverock.org
  ~
  ~
  ~ This program is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU General Public
  ~ License as published by the Free Software Foundation; either
  ~ version 2 of the License, or (at your option) any later version.
  ~
  ~ This library is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public
  ~ License along with this library; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
  -->
<MemberArea xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\sandbox\riverock\riverock-portlet\src-schema\xsd\riverock-portlet-member.xsd" xmlns:portlet="http://java.sun.com/xml/ns/portlet/portlet-app_1_0.xsd">
	<Module name="b2x.shop_config" authApplication="PRICE" authModule="B2C.SHOP" isDelete="0">
		<Content action="index">
			<security-role-ref>
				<role-name>webmill.shop</role-name>
			</security-role-ref>
			<Title isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
				<StringData>Персональные скидки для клиентов</StringData>
			</Title>
			<QueryArea>
				<Restrict type="firm"/>
				<PrimaryKey>ID_USER</PrimaryKey>
				<PrimaryKeyType>number</PrimaryKeyType>
				<MainRefTable>a</MainRefTable>
				<Fields refTable="a" name="ID_USER" dbType="NUMBER" jspType="int_text" isShow="false"/>
				<Fields refTable="a" name="ID_FIRM" dbType="NUMBER" length="1" jspType="int_text" isShow="false">
					<NameColumn isUseProperties="1" storage="mill.locale.AUTH_USER">
						<StringData>index.jsp.is_road</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="LAST_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Фамилия</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="FIRST_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Имя</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="MIDDLE_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Отчество</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="DISCOUNT" dbType="NUMBER" length="50" jspType="float_text" isShow="true">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Размер скидки</StringData>
					</NameColumn>
				</Fields>
				<Table table="WM_LIST_USER" ref="a"/>
				<!--Order field="date_create" direction="desc"/-->
			</QueryArea>
			<TargetAreaName isUseProperties="1" storage="mill.locale.HAM_QSO_LOG">
				<StringData>index.jsp.action</StringData>
			</TargetAreaName>
			<TargetModule action="index">
				<TargetModuleName isUseProperties="1" storage="mill.locale.main">
					<StringData>page.main.3</StringData>
				</TargetModuleName>
			</TargetModule>
			<TargetModule action="change">
				<TargetModuleName isUseProperties="0" storage="mill.locale.main">
					<StringData>Изменить скидку</StringData>
				</TargetModuleName>
			</TargetModule>
		</Content>
		<Content action="change">
			<security-role-ref>
				<role-name>webmill.shop</role-name>
			</security-role-ref>
			<Title isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
				<StringData>Изменение размера скидки для клиента</StringData>
			</Title>
			<QueryArea>
				<Restrict type="firm"/>
				<PrimaryKey>ID_USER</PrimaryKey>
				<PrimaryKeyType>number</PrimaryKeyType>
				<MainRefTable>a</MainRefTable>
				<Fields refTable="a" name="ID_USER" dbType="NUMBER" jspType="int_text" isShow="0"/>
				<Fields refTable="a" name="ID_FIRM" dbType="NUMBER" length="1" jspType="int_text" isShow="false">
					<NameColumn isUseProperties="1" storage="mill.locale.AUTH_USER">
						<StringData>index.jsp.is_road</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="LAST_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true" isEdit="false">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Фамилия</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="FIRST_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true" isEdit="false">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Имя</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="MIDDLE_NAME" dbType="VARCHAR" length="50" jspType="text" isShow="true" isEdit="false">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Отчество</StringData>
					</NameColumn>
				</Fields>
				<Fields refTable="a" name="DISCOUNT" dbType="NUMBER" length="50" jspType="float_text" isShow="true">
					<NameColumn isUseProperties="0" storage="mill.locale.HAM_QSO_LOG">
						<StringData>Размер скидки</StringData>
					</NameColumn>
				</Fields>
				<Table table="WM_LIST_USER" ref="a"/>
				<!--Order field="date_create" direction="desc"/-->
			</QueryArea>
			<TargetAreaName isUseProperties="1" storage="mill.locale.HAM_QSO_LOG">
				<StringData>index.jsp.action</StringData>
			</TargetAreaName>
			<TargetModule action="index">
				<TargetModuleName isUseProperties="1" storage="mill.locale.main">
					<StringData>page.main.3</StringData>
				</TargetModuleName>
			</TargetModule>
			<TargetModule action="change">
				<TargetModuleName isUseProperties="0" storage="mill.locale.main">
					<StringData>Изменение размера скидки</StringData>
				</TargetModuleName>
			</TargetModule>
		</Content>
	</Module>
</MemberArea>
