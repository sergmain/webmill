Концепцияя работы движка

1. Пользователь используя броузер посылает http запрос на веб-сервер с установленым движком webmill.
2. Движек webmill получает http запрос и производит анализ какие станицы запршены и как эти страницы 
должны строиться. В резудбнате этого анализа определяются локаль(язык) запроса, тип шаблона и 
набор портлетов.
3. После того как шаблон определен портал производит построение окончательной web страницы на основе 
этого шаблона. 
4. Прои аостроении страницы портал вызывет соответствующие портлеты для получения контента. Портлеы 
могут выдавать контент, как в XML формате, так и в html. Если контент выдан в формате XML, то портал
производит преодразование в html, с использоаниеи XSL технологи. После усрешного заверщения 
преобрахования подученый фрагмет помещается в конечную страницу. 

Большинство портлетов исрользуемых в webmill моут выдавать контент как в XML, так и в HTML. Удинственным
портлетом который выдает кнтент олько в XML формате является портлет mill.menu. Данный портлет 
предназначет для динамического построения меню. Более подробно о потлете mill.menu можно прочитать в 
статье посвязенной этому портлету.






Шаблон это информация в формате XML, который описывает расположение портлетов на кгечной html странице.






Портлет mill.menu предназначен для динамического построения меню. Для того чтобы постоить меню, 
в админ разделе в пункте "Построение меню" заносятся все необходимые пункты. При эанесении пунктов 
муню также указываются:
- код шаблона, который будет спользвавтьчя для построения кнечной страницы, 
- порядквый номер
- название путкта меню, которое будет тображаться на веб-сранице
- url страницы
- мета-данные для пртлета.


Пункт меню может ссылаться как на динамический шаблон, так  на простой. Пожробнее об отличиях шаблонов 
можно причитать в описании шаблонов.

Поряжковый номер это простое исло в жиападоне 0-999

Название пункта меню пожет быть задано конкретно, так и с помощью интерфейса локализации. 
Для конкретного указания названия поле "Использовать локализацию" надо пставить в "нет", и в поле
"Ключ для локализации" ввеси название. Для истользования локилизаци поле "Использовать локализацию" надо 
перевети в "Да", в поле "Хранилище локализации" указать код хранилища и в поле "Ключ для окализации"
ввесли ключ по кторому в хранилище будет найдена локализованная строка. Более подробно олокализации моджено
прочитать в статье "Локаоизация"

При построении меню портал автоматичеки фрмирует дареса (URL) соответствующих страниц. При этом используется 
следующий механизм: 
- Если в поле "URL этой страницы" не занесена информация, то формат URL'а имеет следующий вид:
http://localhost/pageid/<Language>/<MenuItemId>
где:
<Language> - это язык страницы, который сотвесвует данному пункту меню
<MenuItemId> - id пункта меню

- Если в поле "URL этой страницы" заресено название, то фрмат адреса сраницы ьудет меть акой вид:
http://localhost/page/<Language>/<PageURL>
где:
<Language> - это язык страницы, который сотвесвует данному пункту меню
<PgagURL> - значение поля "URL этой страницы"


Мета-данные использубюся для управления портлетами с целью изменения стандарного механиза работы 
портлета. Каждый портлет имеет свой собвстенный набор мета-данный. Для определения поддержтваемых
мета-даных смотрите описания сответсвующих пртлетов.


При вызове пртлета mill.menu на выходе мы получаем данные в формате XML. Главным элементом по 
умолчанию называеся "MenuSimple". В случае когда на странице размещается несколько портлетов
mill.menu может возникнуть необходимость измеить название главного элемента. Для этого используется
аттрибут шаблона xmlRoot, наприме так:

<SiteTemplateItem  type="portlet"  value="mill.menu" code="TOP_MENU" xmlRoot="TopMenu"> 






































                                      